import{aK as Q,aL as Z,aM as K,a as B,W as T,as as E,r as A,aE as I,w as U,B as F,o as d,X as p,ai as v,H,a1 as M,u as o,ah as ee,aN as te,at as N,f as R,e as z,aO as P,a2 as S,G as q,$ as le,aP as se,ak as ae,aw as ne}from"./node/pnpm-BRmVptv7.js";import{_ as re}from"./index-CcBoYM7q.js";import{u as oe}from"./random-C5ItUyhN.js";import{u as ue}from"./useRequestApi-CE6XWWz4.js";function ie(x,w){const n=new WeakMap;let r=null;function c(t){if(!t)return;(Array.isArray(t)?t:[t]).forEach(l=>{!l.value||!r||n.has(l.value)||(n.set(l.value,!0),r.observe(l.value))})}function g(t){if(!t)return;(Array.isArray(t)?t:[t]).forEach(l=>{!l.value||!r||!n.has(l.value)||(n.delete(l.value),r.unobserve(l.value))})}return Q()&&(Z(()=>{r=new ResizeObserver(w),c(x)}),K(()=>{r&&(g(x),r.disconnect(),r=null)})),{observe:c,unobserve:g}}const ce=B({name:"PluginsScroll"}),fe=B({...ce,props:{list:{},modelValue:{type:Boolean,default:!0},waitTime:{default:0},speed:{default:800},hover:{type:Boolean,default:!0},wheel:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(x,{emit:w}){const n=x,r=w,c=T({get(){return n.modelValue},set(e){r("update:modelValue",e)}}),g=E(),t=E(),m=E([]),l=A(1),a=A(0),y=T(()=>Array.from({length:l.value},()=>n.list));function k(){var u,i;const e=[];for(const f of Array.from((i=(u=m.value)==null?void 0:u[0].children)!=null?i:[]))e.push(f.clientHeight);return e.reduce((f,D)=>{var $;return f.push(te([($=f.at(-1))!=null?$:0,D])),f},[0])}function _(e){if(t.value){if(typeof e=="number"||typeof e>"u"){t.value.style.transition="transform ".concat(e!=null?e:n.speed,"ms linear");return}t.value.style.transition=e}}let b=null,s=[];function h(){b&&(clearTimeout(b),b=null)}function G(){h(),a.value>s.length-2&&t.value&&(_(0),a.value=0,t.value.style.transform="translateY(0px)"),b=setTimeout(()=>{_(),t.value&&(a.value++,t.value.style.transform="translateY(-".concat(s[a.value]||0,"px)"))},n.waitTime)}function X(){var e;!c.value||l.value===1||(s=k(),G(),(e=t.value)==null||e.addEventListener("transitionend",G,!0))}function L(){X()}function V(){h(),_(0),t.value&&t.value.removeEventListener("transitionend",G,!0)}let W;(e=>{e[e.UP=-1]="UP",e[e.DOWN=1]="DOWN"})(W||(W={}));function Y(e){t.value&&(a.value+=e,e===-1&&a.value<0&&(a.value=s.length-2),e===1&&a.value>s.length-2&&(a.value=0),t.value.style.transform="translateY(".concat(-1*s[a.value]||0,"px)"))}function j(e){!n.hover||!n.wheel||l.value===1||(e.deltaY>0?Y(1):Y(-1))}function C(){a.value=0,V(),t.value&&(t.value.style.transform="translateY(0px)")}const O=I(()=>{var i,f;const e=g.value,u=t.value;if(!e||!u)return-1;l.value=((f=(i=m.value[0])==null?void 0:i.clientHeight)!=null?f:0)-e.clientHeight<0?1:2,F(()=>{c.value&&l.value>1&&L(),l.value===1&&C()})},200);function J(e){e.forEach(()=>{O()})}return U(()=>n.list,()=>{l.value=1,C(),F(()=>{O()})}),U(c,e=>{if(e){L();return}V()}),ie([g],J),K(()=>{V()}),(e,u)=>(d(),p("main",{ref_key:"rootRef",ref:g,class:"fz-scroll"},[v("section",{ref_key:"wrapperRef",ref:t,class:"fz-scroll-list",onWheel:u[0]||(u[0]=i=>e.wheel&&e.hover&&j(i)),onMouseover:u[1]||(u[1]=i=>e.hover&&V()),onMouseleave:u[2]||(u[2]=i=>e.hover&&L())},[(d(!0),p(H,null,M(o(y),(i,f)=>(d(),p("ul",{ref_for:!0,ref_key:"listRef",ref:m,key:f,class:"fz-scroll-list"},[(d(!0),p(H,null,M(i,(D,$)=>(d(),p("li",{key:$,class:"fz-scroll-list"},[ee(e.$slots,"item",{data:D,index:$},void 0,!0)]))),128))]))),128))],544)],512))}}),ve=re(fe,[["__scopeId","data-v-55d68abb"]]),de={class:"grid grid-cols-4 grid-rows-2 gap-4 wh-full"},pe={class:"size-full flex flex-col"},me={class:"relative w-full flex-1 bg-#9980FA"},_e={"un-overflow-hidden":"","un-abs-0":""},he={class:"size-full bg-blueGray"},ge={class:"flex flex-col bg-blueGray"},ye={class:"mb-20px"},be={class:"relative flex-1"},we={class:"abs-0"},xe=se('<li class="bg-blueGray"></li><li class="bg-blueGray"></li><li class="bg-blueGray"></li><li class="bg-blueGray"></li><li class="bg-blueGray"></li>',5),ke=B({name:"demo-list-scroll"}),Ve=B({...ke,setup(x){const w=[5,10,20,30,40],n=A(0);function r(a=10){return new Promise(y=>{setTimeout(()=>{n.value=a,y(Array.from({length:a},(k,_)=>({id:_+1,str:oe()})))},1e3)})}const{loading:c,setParams:g,data:t}=ue(r,[w[0]]),m=T(()=>{var a;return(a=t.value)!=null?a:[]}),l=A(!1);return(a,y)=>{const k=ae,_=ve,b=ne;return d(),p("ul",de,[v("li",pe,[v("h1",null,[(d(),p(H,null,M(w,s=>R(k,{key:s,type:o(n)===s?"primary":"",onClick:h=>o(g)([s])},{default:z(()=>[q(S(s),1)]),_:2},1032,["type","onClick"])),64))]),N((d(),p("section",me,[v("div",_e,[R(_,{list:o(m)},{item:z(({data:s,index:h})=>[v("div",{class:"mb-10px bg-#fab1a0",style:P({height:"".concat(h*3+20,"px")})},S(s),5)]),_:1},8,["list"])])])),[[b,o(c)]])]),N((d(),p("li",he,[R(_,{list:o(m),"wait-time":1e3},{item:z(({data:s,index:h})=>[v("div",{class:"mb-10px bg-#fab1a0",style:P({height:"".concat(h*3+20,"px")})},S(s),5)]),_:1},8,["list"])])),[[b,o(c)]]),v("li",ge,[v("h1",ye,[R(k,{type:"success",onClick:y[0]||(y[0]=s=>l.value=!o(l))},{default:z(()=>[q(S(o(l)?"暂停":"开始"),1)]),_:1})]),N((d(),p("section",be,[v("div",we,[R(_,{modelValue:o(l),"onUpdate:modelValue":y[1]||(y[1]=s=>le(l)?l.value=s:null),list:o(m),"wait-time":1e3},{item:z(({data:s,index:h})=>[v("div",{class:"mb-10px bg-#fab1a0",style:P({height:"".concat(h*3+20,"px")})},S(s),5)]),_:1},8,["modelValue","list"])])])),[[b,o(c)]])]),xe])}}});export{Ve as default};
