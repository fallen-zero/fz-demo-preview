import{a as M,aD as V,aQ as C,r as w,o as E,X as R,ai as v,f as n,e as i,u as l,b3 as U,G as I,aa as S,aj as T,ak as B,av as q,a$ as D,b0 as N}from"./node/pnpm-BRmVptv7.js";import{_ as j}from"./index.vue_vue_type_script_setup_true_name_PluginsImage_lang-GAf0l0k-.js";import{e as F,s as P,R as H,_ as K}from"./index-CcBoYM7q.js";import{u as L}from"./random-C5ItUyhN.js";const O=""+new URL("../png/tiger-DB3Sp-XP.png",import.meta.url).href,y=["1","2","3","4","5","6","7","8","9","0","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],m=["red","blue","green","yellow","orange","purple","pink","brown","gray","black","white"];function X(c,u,o=20){const t=document.createElement("canvas");t.width=c,t.height=u;const a=t.getContext("2d");if(!a)throw new Error("Canvas not supported");a.fillStyle="white",a.fillRect(0,0,t.width,t.height),a.font="bold ".concat(o,"px Mocrosoft YaHei");const s=[],d=[],r=[];for(let e=0;e<4;e++)s.push(s[e]),s[e]=y[Math.floor(Math.random()*y.length)],d[e]=e*20+10,r[e]=Math.random()*(u-o)+u-o/2,a.fillStyle=m[Math.floor(Math.random()*m.length)],a.fillText(s[e],d[e],r[e]);const f=s.join("").toUpperCase();for(let e=0;e<3;e++)a.strokeStyle=m[Math.floor(Math.random()*m.length)],a.lineWidth=1,a.beginPath(),a.moveTo(Math.floor(Math.random()*t.width),Math.floor(Math.random()*t.height)),a.lineTo(Math.floor(Math.random()*t.width),Math.floor(Math.random()*t.height)),a.stroke();for(let e=0;e<30;e++)a.fillStyle=m[Math.floor(Math.random()*m.length)],a.fillRect(Math.floor(Math.random()*t.width),Math.floor(Math.random()*t.height),1,1);const p=t.toDataURL("image/png");return t.remove(),{code:f,image:p}}const $=c=>(D("data-v-d4743a0c"),c=c(),N(),c),G={class:"login flex-center wh-full"},Q={class:"h-320px flex-center overflow-hidden rounded-md bg-white shadow-[0_0_20px_0_rgba(0,0,0,0.3)]"},W=$(()=>v("img",{src:O,class:"hidden h-full w-300px bg-gray-100 object-cover p-8 md:block",draggable:"false"},null,-1)),Y=M({name:"login"}),A=M({...Y,setup(c){const u=V(),o=C({name:"admin",password:"123456",captcha:{key:"",value:""}}),t={name:{required:!0,message:"请输入用户名"},password:{required:!0,message:"请输入密码"},"captcha.value":{required:!0,message:"请输入验证码"}},a=w(),s=w("");function d(){const{code:p,image:e}=X(100,30);s.value=e,o.captcha.key=p}d();const r=w(!1);async function f(){a.value&&await a.value.validate(async p=>{p&&(r.value=!0,o.captcha.value.toUpperCase()!==o.captcha.key.toUpperCase()?(F.ElMessage.error("验证码错误"),o.captcha.value="",r.value=!1):(P(L()),u.replace({name:H.HOME})),d())})}return(p,e)=>{const _=S,g=T,b=j,x=B,k=q;return E(),R("main",G,[v("div",Q,[n(k,{ref_key:"formRef",ref:a,model:l(o),rules:t,"label-position":"top","hide-required-asterisk":"",class:"w-300px p-5"},{default:i(()=>[n(g,{label:"用户名",prop:"name"},{default:i(()=>[n(_,{modelValue:l(o).name,"onUpdate:modelValue":e[0]||(e[0]=h=>l(o).name=h),readonly:l(r),placeholder:"请输入用户名"},null,8,["modelValue","readonly"])]),_:1}),n(g,{label:"密码",prop:"password"},{default:i(()=>[n(_,{modelValue:l(o).password,"onUpdate:modelValue":e[1]||(e[1]=h=>l(o).password=h),readonly:l(r),type:"password",placeholder:"请输入密码",autocomplete:"autocomplete"},null,8,["modelValue","readonly"])]),_:1}),n(g,{label:"验证码",prop:"captcha.value"},{default:i(()=>[n(_,{modelValue:l(o).captcha.value,"onUpdate:modelValue":e[2]||(e[2]=h=>l(o).captcha.value=h),readonly:l(r),placeholder:"请输入验证码",onKeydown:U(f,["enter"])},{append:i(()=>[v("div",{class:"captcha",onClick:d},[n(b,{src:l(s),class:"size-full"},null,8,["src"])])]),_:1},8,["modelValue","readonly"])]),_:1}),n(x,{loading:l(r),type:"primary",class:"w-full",onClick:f},{default:i(()=>[I(" 登录 ")]),_:1},8,["loading"])]),_:1},8,["model"]),W])])}}}),ae=K(A,[["__scopeId","data-v-d4743a0c"]]);export{ae as default};
